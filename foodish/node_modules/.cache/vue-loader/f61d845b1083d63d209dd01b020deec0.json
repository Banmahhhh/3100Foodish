{"remainingRequest":"/Users/li/Desktop/foodish/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/li/Desktop/foodish/src/views/login/index.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/Users/li/Desktop/foodish/src/views/login/index.vue","mtime":1550488422000},{"path":"/Users/li/Desktop/foodish/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/li/Desktop/foodish/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/li/Desktop/foodish/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/li/Desktop/foodish/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/li/Desktop/foodish/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.login-aixin {\r\n  position: absolute;\r\n  width: 30px;\r\n  height: 30px;\r\n  z-index: 9;\r\n}\r\n.aixin-animation {\r\n  animation: aixin 1s forwards;\r\n}\r\n@keyframes aixin {\r\n  0% {\r\n    opacity: 0.95;\r\n    transform: translateY(0);\r\n  }\r\n  50% {\r\n    opacity: 0.9;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n    transform: translateY(-100px);\r\n  }\r\n}\r\n.form-hide {\r\n  opacity: 0;\r\n  transition: opacity 1.2s;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n  <div ref=\"page\" class=\"login\" @click=\"onPageClick\">\r\n    <Carousel loop autoplay :autoplay-speed=\"5000\" arrow=\"never\">\r\n      <CarouselItem v-for=\"(img, index) in data\" :key=\"index\">\r\n        <div class=\"carousel\" :style=\"currStyle(img)\"></div>\r\n      </CarouselItem>\r\n    </Carousel>\r\n    <div class=\"logo-wrap\" :style=\"hide ? 'top:50%' : 'top:35%'\">\r\n      <div\r\n        @click=\"hide = false\"\r\n        class=\"logo\"\r\n        :style=\"currStyle(require('@/resource/logo.jpg'))\"\r\n      ></div>\r\n      <h3>Foodish</h3>\r\n      <Form\r\n        class=\"form-hide\"\r\n        :style=\"hide ? 'opacity:0' : 'opacity:1'\"\r\n        ref=\"form\"\r\n        :model=\"forms\"\r\n        :rules=\"rules\"\r\n        @click.stop=\"() => {}\"\r\n      >\r\n        <FormItem v-if=\"status == 1\" prop=\"name\">\r\n          <Input\r\n            class=\"login-input\"\r\n            size=\"large\"\r\n            v-model=\"forms.name\"\r\n            placeholder=\"Enter your name\"\r\n          ></Input>\r\n        </FormItem>\r\n        <FormItem prop=\"email\">\r\n          <Input\r\n            class=\"login-input\"\r\n            size=\"large\"\r\n            v-model=\"forms.username\"\r\n            placeholder=\"Enter your email\"\r\n          ></Input>\r\n        </FormItem>\r\n        <FormItem prop=\"password\">\r\n          <Input\r\n            type=\"password\"\r\n            class=\"login-input\"\r\n            size=\"large\"\r\n            v-model=\"forms.password\"\r\n            placeholder=\"Enter your password\"\r\n          ></Input>\r\n        </FormItem>\r\n        <FormItem v-if=\"status == 1\" prop=\"password2\">\r\n          <Input\r\n            type=\"password\"\r\n            class=\"login-input\"\r\n            size=\"large\"\r\n            v-model=\"forms.password2\"\r\n            placeholder=\"Enter your password\"\r\n          ></Input>\r\n        </FormItem>\r\n        <div class=\"form-footer\">\r\n          <Button size=\"large\" @click=\"login\">login</Button>\r\n          <Button size=\"large\" @click=\"signup\">signup</Button>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      status: 0, //0是登录 1是注册\r\n      hide: true, //是否显示\r\n      forms: {\r\n        name: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        password2: \"\"\r\n      },\r\n      data: [\r\n        require(\"@/resource/3.jpg\"),\r\n        require(\"@/resource/4.jpg\"),\r\n        require(\"@/resource/5.jpg\"),\r\n        require(\"@/resource/6.jpg\"),\r\n        require(\"@/resource/7.jpg\")\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      //This username has been used\r\n      //Invalid username or password\r\n      if (!this.status) {\r\n        return {\r\n          username: {\r\n            required: true,\r\n            message: \"User name cannot be empty\",\r\n            trigger: \"blur\"\r\n          },\r\n          password: {\r\n            required: true,\r\n            message: \"Password cannot be empty\",\r\n            trigger: \"blur\"\r\n          }\r\n        };\r\n      } else {\r\n        return {\r\n          name: {\r\n            required: true,\r\n            message: \"User name cannot be empty\",\r\n            trigger: \"blur\"\r\n          },\r\n          username: {\r\n            required: true,\r\n            message: \"User username cannot be empty\",\r\n            trigger: \"blur\"\r\n          },\r\n          password: {\r\n            required: true,\r\n            message: \"Password cannot be empty\",\r\n            trigger: \"blur\"\r\n          },\r\n          password2: {\r\n            required: true,\r\n            message: \"Password cannot be empty\",\r\n            trigger: \"blur\"\r\n          }\r\n        };\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    currStyle(img) {\r\n      return `background:url(${img}) no-repeat center center;background-size: cover;`;\r\n    },\r\n    onPageClick(e) {\r\n      const { pageX, pageY } = e;\r\n      const img = document.createElement(\"img\");\r\n      img.src = require(\"@/resource/aixin.svg\");\r\n      img.className = \"login-aixin aixin-animation\";\r\n      img.style.left = pageX - 15 + \"px\";\r\n      img.style.top = pageY - 15 + \"px\";\r\n      this.$refs.page.appendChild(img);\r\n      setTimeout(() => {\r\n        this.$refs.page && this.$refs.page.removeChild(img);\r\n      }, 1000);\r\n    },\r\n    async login() {\r\n      if (this.status == 1) {\r\n        this.status = 0;\r\n        return;\r\n      }\r\n      const result = await this.$refs.form.validate();\r\n      if (!result) return;\r\n      try {\r\n        const { data } = await this.$http({\r\n          url: this.API.LOGIN,\r\n          method: \"post\",\r\n          data: this.forms\r\n        });\r\n        const { token } = data;\r\n        this.$store.commit(\"users\", { token });\r\n        const { data: list } = await this.$http({\r\n          url: this.API.USER_LIST(this.forms.username)\r\n        });\r\n        this.$store.commit(\"users\", { token, ...list[0] });\r\n        this.$Message.success(\"login successfully\");\r\n        this.$router.replace({\r\n          name: \"Home\"\r\n        });\r\n      } catch (error) {\r\n        this.$Message.error(\"Invalid username or password\");\r\n      }\r\n    },\r\n    async signup() {\r\n      if (this.status == 0) {\r\n        this.status = 1;\r\n        return;\r\n      }\r\n      const result = await this.$refs.form.validate();\r\n      if (!result) return;\r\n      if (this.forms.password !== this.forms.password2) {\r\n        this.$Message.error(\"The two passwords are inconsistent!\");\r\n        return;\r\n      }\r\n      if (this.forms.username.indexOf(\"@\") == -1) {\r\n        this.$Message.error(\"The mailbox format is incorrect\");\r\n        return;\r\n      }\r\n      try {\r\n        const { data } = await this.$http({\r\n          url: this.API.REGISTER,\r\n          method: \"post\",\r\n          data: this.forms\r\n        });\r\n        this.$Message.success(\"signup was successful\");\r\n      } catch (error) {\r\n        this.$Message.error(\"This username has been used\");\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.login {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  .ivu-carousel {\r\n    height: 100%;\r\n  }\r\n}\r\n.login /deep/ .ivu-carousel-track,\r\n.login /deep/ .ivu-carousel-list,\r\n.login /deep/ .ivu-carousel-item,\r\n.login /deep/ .carousel {\r\n  height: 100% !important;\r\n}\r\n.login /deep/ .ivu-input {\r\n  background-color: transparent;\r\n  border-color: #fff;\r\n  border-radius: 100px;\r\n  width: 300px;\r\n  color: #fff;\r\n}\r\n.login /deep/ input {\r\n  padding-left: 20px;\r\n}\r\n.login /deep/ .ivu-form-item-error-tip {\r\n  padding-left: 20px;\r\n}\r\n.login /deep/ .ivu-input:focus {\r\n  border-color: #fff;\r\n  box-shadow: 0 0 0 transparent;\r\n}\r\n.login /deep/ input::-webkit-input-placeholder {\r\n  /* WebKit browsers */\r\n  color: #fff;\r\n}\r\n.login /deep/ input:-moz-placeholder {\r\n  /* Mozilla Firefox 4 to 18 */\r\n  color: #fff;\r\n}\r\n.login /deep/ input::-moz-placeholder {\r\n  /* Mozilla Firefox 19+ */\r\n  color: #fff;\r\n}\r\n.login /deep/ input:-ms-input-placeholder {\r\n  /* Internet Explorer 10+ */\r\n  color: #fff;\r\n}\r\n.form-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.form-footer /deep/ .ivu-btn {\r\n  background-color: transparent;\r\n  border-radius: 100px;\r\n  color: #fff;\r\n  width: 140px;\r\n  border-color: #fff;\r\n  background-color: transparent;\r\n}\r\n.logo-wrap {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  transition: top 1.2s;\r\n  .logo {\r\n    width: 80px;\r\n    height: 80px;\r\n    border-radius: 150px;\r\n    border: 1px solid #fff;\r\n    cursor: pointer;\r\n    margin: 0 auto;\r\n  }\r\n  h3 {\r\n    color: #fff;\r\n    text-align: center;\r\n    font-size: 48px;\r\n    font-family: Georgia, serif;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.login-aixin {\r\n  position: absolute;\r\n  width: 30px;\r\n  height: 30px;\r\n  z-index: 9;\r\n}\r\n.aixin-animation {\r\n  animation: aixin 1s forwards;\r\n}\r\n@keyframes aixin {\r\n  0% {\r\n    opacity: 0.95;\r\n    transform: translateY(0);\r\n  }\r\n  50% {\r\n    opacity: 0.9;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n    transform: translateY(-100px);\r\n  }\r\n}\r\n.form-hide {\r\n  opacity: 0;\r\n  transition: opacity 1.2s;\r\n}\r\n</style>\r\n"]}]}